
{
  "project_name": "AI Novel Generator v4 - UI í…ìŠ¤íŠ¸ ì˜ì—­ í™•ì¥",
  "backup_created": false,
  "git_enabled": true,
  "tasks": [
    {
      "step": 1,
      "description": "í˜„ì¬ HTML êµ¬ì¡° ë¶„ì„ ë° ë°±ì—…",
      "command": "filesystem.read",
      "parameters": {
        "path": "index.html"
      },
      "expected_result": "í˜„ì¬ HTML êµ¬ì¡° í™•ì¸ ì™„ë£Œ",
      "rollback_possible": true,
      "git_commit": {
        "enabled": true,
        "message": "docs: í˜„ì¬ HTML êµ¬ì¡° ë¶„ì„ ì™„ë£Œ",
        "description": "- ê¸°ì¡´ 3ë¶„í•  ë ˆì´ì•„ì›ƒ êµ¬ì¡° íŒŒì•…\n- ë°±ì—…ì„ ìœ„í•œ í˜„ì¬ ìƒíƒœ í™•ì¸"
      }
    },
    {
      "step": 2,
      "description": "ê¸°ì¡´ CSS ìŠ¤íƒ€ì¼ ë¶„ì„",
      "command": "filesystem.read",
      "parameters": {
        "path": "src/style.css"
      },
      "expected_result": "í˜„ì¬ CSS ê·¸ë¦¬ë“œ ë° ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼ íŒŒì•…",
      "rollback_possible": true,
      "git_commit": {
        "enabled": false,
        "message": "",
        "description": ""
      }
    },
    {
      "step": 3,
      "description": "HTML êµ¬ì¡°ë¥¼ ìƒˆë¡œìš´ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ë³€ê²½",
      "command": "filesystem.write",
      "parameters": {
        "path": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"ko\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>AI Novel Generator v4</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap\" rel=\"stylesheet\">\n    <link rel=\"stylesheet\" href=\"src/style.css\">\n</head>\n<body class=\"bg-gray-900 text-white font-['Noto_Sans_KR']\">\n    <!-- í˜ì´ì§€ ë¡œë” -->\n    <div id=\"page-loader\" class=\"fixed inset-0 bg-gray-900 flex items-center justify-center z-50 hidden\">\n        <div class=\"text-center\">\n            <div class=\"animate-spin rounded-full h-16 w-16 border-b-2 border-white mb-4\"></div>\n            <p id=\"page-loader-text\" class=\"text-lg\">ë¡œë”© ì¤‘...</p>\n        </div>\n    </div>\n\n    <!-- ì„¤ì • í™”ë©´ -->\n    <div id=\"setup-screen\" class=\"min-h-screen flex items-center justify-center p-8\">\n        <div class=\"bg-gray-800 rounded-lg p-8 max-w-md w-full\">\n            <h1 class=\"text-3xl font-bold mb-8 text-center\">AI Novel Generator v4</h1>\n            \n            <div class=\"space-y-6\">\n                <div>\n                    <label class=\"block text-sm font-medium mb-2\">ì¥ë¥´</label>\n                    <input id=\"genre-input\" type=\"text\" placeholder=\"ì˜ˆ: íŒíƒ€ì§€, SF, ë¡œë§¨ìŠ¤...\" \n                           class=\"w-full p-3 bg-gray-700 rounded-lg border border-gray-600 focus:border-blue-500\">\n                </div>\n                \n                <div>\n                    <label class=\"block text-sm font-medium mb-2\">ëª¨í—˜ ì„¤ì •</label>\n                    <textarea id=\"adventure-input\" placeholder=\"ì–´ë–¤ ëª¨í—˜ì„ ì‹œì‘í•˜ê³  ì‹¶ë‚˜ìš”?\" \n                              class=\"w-full p-3 bg-gray-700 rounded-lg border border-gray-600 focus:border-blue-500 h-24 resize-none\"></textarea>\n                </div>\n                \n                <div class=\"space-y-4\">\n                    <button id=\"start-btn\" class=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors\">\n                        ëª¨í—˜ ì‹œì‘í•˜ê¸°\n                    </button>\n                    \n                    <div class=\"flex gap-2\">\n                        <input type=\"file\" id=\"load-input\" accept=\".json\" class=\"hidden\">\n                        <button id=\"load-btn\" class=\"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 rounded-lg transition-colors\">\n                            ì´ì–´í•˜ê¸°\n                        </button>\n                        \n                        <div class=\"relative\">\n                            <input id=\"api-key-setup-input\" type=\"password\" placeholder=\"Gemini API Key (ì„ íƒì‚¬í•­)\" \n                                   class=\"w-48 p-2 bg-gray-700 rounded-lg border border-gray-600 focus:border-blue-500 text-sm\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- ìƒˆë¡œìš´ ë©”ì¸ ê²Œì„ í™”ë©´ -->\n    <div id=\"story-screen\" class=\"hidden h-screen grid-new-layout\">\n        <!-- ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->\n        <div class=\"main-content-area\">\n            <!-- í…ìŠ¤íŠ¸ ì˜ì—­ (ë¹¨ê°•) -->\n            <div id=\"text-panel\" class=\"text-area\">\n                <div class=\"flex items-center justify-between mb-4\">\n                    <h2 id=\"scene-title\" class=\"text-2xl font-bold\">ì¥ë©´ ì œëª©</h2>\n                    <div class=\"flex gap-2\">\n                        <button id=\"prev-btn\" class=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors disabled:opacity-50\">\n                            â† ì´ì „\n                        </button>\n                        <button id=\"next-btn\" class=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors disabled:opacity-50\">\n                            ë‹¤ìŒ â†’\n                        </button>\n                    </div>\n                </div>\n                \n                <div class=\"story-content\">\n                    <div id=\"story-output\" class=\"text-lg leading-relaxed mb-6\">ìŠ¤í† ë¦¬ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>\n                    \n                    <!-- ì„ íƒì§€ë“¤ì´ í…ìŠ¤íŠ¸ ì˜ì—­ í•˜ë‹¨ì— í‘œì‹œ -->\n                    <div id=\"choice-container\" class=\"flex flex-col gap-2 mt-4\"></div>\n                </div>\n            </div>\n            \n            <!-- ì…ë ¥ ì˜ì—­ -->\n            <div class=\"input-section\">\n                <!-- í™•ì¥ ê°€ëŠ¥í•œ í…ìŠ¤íŠ¸ ì…ë ¥ì°½ (ì£¼í™©) -->\n                <form id=\"story-form\">\n                    <textarea id=\"user-input\" \n                              placeholder=\"í–‰ë™ì„ ì…ë ¥í•˜ì„¸ìš”... (Enter: ì „ì†¡, Shift+Enter: ì¤„ë°”ê¿ˆ)\" \n                              class=\"text-input w-full p-4 bg-gray-800 border border-gray-700 rounded-lg resize-none focus:border-blue-500 focus:outline-none\"\n                              rows=\"2\"></textarea>\n                </form>\n                \n                <!-- íˆ´ë°” + ì „ì†¡ ë²„íŠ¼ ì˜ì—­ -->\n                <div class=\"bottom-toolbar\">\n                    <!-- íˆ´ë°” ì•„ì´ì½˜ë“¤ (ì´ˆë¡) -->\n                    <div class=\"toolbar-icons\">\n                        <button class=\"toolbar-btn\" data-action=\"inventory\" title=\"ì¸ë²¤í† ë¦¬\">\n                            ğŸ’\n                        </button>\n                        <button class=\"toolbar-btn\" data-action=\"status\" title=\"ìºë¦­í„° ìƒíƒœ\">\n                            ğŸ“Š\n                        </button>\n                        <button class=\"toolbar-btn\" data-action=\"skills\" title=\"ìŠ¤í‚¬\">\n                            âš”ï¸\n                        </button>\n                        <button class=\"toolbar-btn\" data-action=\"settings\" title=\"ì„¤ì •\">\n                            âš™ï¸\n                        </button>\n                    </div>\n                    \n                    <!-- ì „ì†¡ ë²„íŠ¼ (íŒŒë‘) -->\n                    <button id=\"send-btn\" type=\"submit\" form=\"story-form\" \n                            class=\"send-button bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-semibold transition-colors\">\n                        ì „ì†¡\n                    </button>\n                </div>\n            </div>\n        </div>\n        \n        <!-- ì´ë¯¸ì§€ ì˜ì—­ (íšŒìƒ‰) -->\n        <div class=\"image-area\">\n            <div class=\"relative h-full\">\n                <img id=\"story-illustration\" src=\"https://placehold.co/800x1200/6b7280/ffffff?text=ì´ë¯¸ì§€+ìƒì„±ì¤‘\" \n                     alt=\"Story Illustration\" class=\"w-full h-full object-cover rounded-lg\">\n                \n                <!-- ì´ë¯¸ì§€ ë¡œë” -->\n                <div id=\"image-loader\" class=\"absolute inset-0 flex items-center justify-center bg-gray-800 bg-opacity-75 rounded-lg hidden\">\n                    <div class=\"text-center\">\n                        <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-white mb-4 mx-auto\"></div>\n                        <p id=\"image-loader-text\" class=\"text-sm\">ì´ë¯¸ì§€ ìƒì„± ì¤‘...</p>\n                    </div>\n                </div>\n                \n                <!-- íˆ´ë°” ì˜¤ë²„ë ˆì´ (ì¶”í›„ êµ¬í˜„) -->\n                <div id=\"toolbar-overlay\" class=\"absolute inset-0 bg-black bg-opacity-90 backdrop-blur-sm rounded-lg hidden\">\n                    <div class=\"p-6 h-full overflow-y-auto\">\n                        <div class=\"flex items-center justify-between mb-4\">\n                            <h3 id=\"overlay-title\" class=\"text-xl font-bold\">ì œëª©</h3>\n                            <button id=\"close-overlay\" class=\"text-gray-400 hover:text-white\">\n                                âœ•\n                            </button>\n                        </div>\n                        <div id=\"overlay-content\" class=\"text-gray-300\">\n                            ì»¨í…ì¸ ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- ê¸°ì¡´ ìš”ì†Œë“¤ ìœ ì§€ -->\n    <div id=\"past-action-container\" class=\"hidden\">\n        <div class=\"bg-gray-800 p-4 rounded-lg mb-4\">\n            <h3 class=\"text-lg font-semibold mb-2\">ì´ì „ í–‰ë™:</h3>\n            <p id=\"past-action-text\" class=\"text-gray-300\"></p>\n            <button id=\"branch-btn\" class=\"mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg\">\n                ì—¬ê¸°ì„œ ë‹¤ë¥¸ ì„ íƒ í•˜ê¸°\n            </button>\n        </div>\n    </div>\n    \n    <div id=\"input-loader\" class=\"loading-overlay hidden\">\n        <div class=\"text-center\">\n            <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-white mb-4 mx-auto\"></div>\n            <p id=\"input-loader-text\" class=\"text-lg\">ì²˜ë¦¬ ì¤‘...</p>\n        </div>\n    </div>\n    \n    <!-- ì„¤ì • ëª¨ë‹¬ ë° ê¸°íƒ€ ìš”ì†Œë“¤ -->\n    <button id=\"settings-btn-floating\" class=\"fixed top-4 right-4 z-50 bg-gray-800 hover:bg-gray-700 p-3 rounded-full\">\n        âš™ï¸\n    </button>\n    \n    <div id=\"settings-modal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden\">\n        <div class=\"bg-gray-800 p-6 rounded-lg max-w-md w-full mx-4\">\n            <h3 class=\"text-xl font-bold mb-4\">ì„¤ì •</h3>\n            \n            <div class=\"space-y-4\">\n                <div>\n                    <label class=\"block text-sm font-medium mb-2\">Gemini API Key</label>\n                    <input id=\"api-key-modal-input\" type=\"password\" \n                           class=\"w-full p-3 bg-gray-700 rounded-lg border border-gray-600\">\n                </div>\n                \n                <div class=\"flex items-center gap-2\">\n                    <input id=\"debug-checkbox\" type=\"checkbox\">\n                    <label for=\"debug-checkbox\">ë””ë²„ê·¸ ëª¨ë“œ</label>\n                </div>\n                \n                <div class=\"flex gap-2\">\n                    <button id=\"save-btn\" class=\"flex-1 bg-green-600 hover:bg-green-700 py-2 rounded-lg\">\n                        ì €ì¥í•˜ê¸°\n                    </button>\n                    <button id=\"load-modal-btn\" class=\"flex-1 bg-blue-600 hover:bg-blue-700 py-2 rounded-lg\">\n                        ë¶ˆëŸ¬ì˜¤ê¸°\n                    </button>\n                </div>\n            </div>\n            \n            <button id=\"close-settings-btn\" class=\"mt-4 w-full bg-gray-700 hover:bg-gray-600 py-2 rounded-lg\">\n                ë‹«ê¸°\n            </button>\n        </div>\n    </div>\n    \n    <!-- ë””ë²„ê·¸ ìš”ì†Œë“¤ (ê¸°ì¡´ ìœ ì§€) -->\n    <div id=\"prompt-overlay\" class=\"fixed top-0 left-0 bg-red-600 text-white p-2 text-xs z-40 hidden\"></div>\n    <div id=\"debug-output-container\" class=\"hidden\"></div>\n    \n    <!-- ê¸€ë¡œë²Œ íˆ´íŒ -->\n    <div id=\"global-tooltip\" class=\"js-tooltip\"></div>\n    \n    <!-- ì´ë¯¸ì§€ ë·°ì–´ ëª¨ë‹¬ -->\n    <div id=\"image-viewer-modal\" class=\"modal-backdrop hidden\">\n        <div class=\"modal-content\">\n            <img id=\"modal-image-content\" src=\"\" alt=\"Full Size Image\" class=\"max-w-full max-h-full\">\n            <button id=\"close-image-viewer\" class=\"absolute top-4 right-4 text-white text-2xl\">&times;</button>\n        </div>\n    </div>\n\n    <!-- ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->\n    <script type=\"module\" src=\"src/js/main.js\"></script>\n</body>\n</html>"
      },
      "expected_result": "HTML êµ¬ì¡°ê°€ ìƒˆë¡œìš´ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ë³€ê²½ë¨",
      "rollback_possible": true,
      "git_commit": {
        "enabled": true,
        "message": "feat: ìƒˆë¡œìš´ ë ˆì´ì•„ì›ƒ HTML êµ¬ì¡° êµ¬í˜„",
        "description": "- 67:33 ë¶„í•  ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ë³€ê²½\n- í…ìŠ¤íŠ¸ ì˜ì—­ì„ 67%ë¡œ í™•ì¥\n- í•˜ë‹¨ ì…ë ¥ ì˜ì—­ ì¶”ê°€ (í™•ì¥í˜• ì…ë ¥ì°½ + íˆ´ë°” + ì „ì†¡ë²„íŠ¼)\n- ì´ë¯¸ì§€ ì˜ì—­ì— íˆ´ë°” ì˜¤ë²„ë ˆì´ ì¤€ë¹„"
      }
    },
    {
      "step": 4,
      "description": "ìƒˆë¡œìš´ ë ˆì´ì•„ì›ƒì— ë§ëŠ” CSS ìŠ¤íƒ€ì¼ ì¶”ê°€",
      "command": "filesystem.write",
      "parameters": {
        "path": "src/style.css",
        "content": "body { font-family: 'Noto Sans KR', sans-serif; overflow: hidden; }\n.input-panel { background: rgba(31, 41, 55, 0.6); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); transition: background 0.3s ease; }\n.input-panel.focused { background: rgba(31, 41, 55, 0.85); }\n::-webkit-scrollbar { width: 8px; }\n::-webkit-scrollbar-track { background: #1f2937; }\n::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }\n::-webkit-scrollbar-thumb:hover { background: #6b7280; }\n.loading-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 10; }\n.modal-backdrop { position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.6); backdrop-filter: blur(4px); z-index: 40; }\n.modal-content { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 50; }\n\n.js-tooltip {\n    visibility: hidden; position: fixed; background-color: #1f2937; color: #fff; text-align: left;\n    border-radius: 6px; padding: 10px; z-index: 100;\n    opacity: 0; transition: opacity 0.3s; border: 1px solid #4b5563;\n    max-width: 300px; pointer-events: none;\n}\n.js-tooltip.visible { visibility: visible; opacity: 1; }\n\n#settings-btn-floating {\n    position: fixed;\n    top: 1rem;\n    right: 1rem;\n    z-index: 9999; \n}\n\n#story-output {\n     white-space: pre-wrap !important;\n}\n\n#story-screen.loading-outline {\n    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0);\n    animation: pulse-border 1.5s infinite;\n}\n@keyframes pulse-border {\n    0% { box-shadow: 0 0 0 0px rgba(99, 102, 241, 0.7); }\n    100% { box-shadow: 0 0 0 15px rgba(99, 102, 241, 0); }\n}\n\n/* ìƒˆë¡œìš´ ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼ */\n.grid-new-layout {\n    display: grid;\n    grid-template-columns: 2fr 1fr; /* 67% : 33% */\n    grid-template-rows: 1fr;\n    gap: 1rem;\n    padding: 1rem;\n    height: 100vh;\n    box-sizing: border-box;\n}\n\n.main-content-area {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    min-height: 0;\n}\n\n/* í…ìŠ¤íŠ¸ ì˜ì—­ (ë¹¨ê°• ì˜ì—­) */\n.text-area {\n    flex-grow: 1;\n    background: rgba(31, 41, 55, 0.3);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    border-radius: 12px;\n    padding: 2rem;\n    overflow-y: auto;\n    min-height: 0;\n}\n\n.story-content {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n}\n\n#story-output {\n    flex-grow: 1;\n    font-size: 1.1rem;\n    line-height: 1.7;\n    margin-bottom: 1rem;\n}\n\n/* ì„ íƒì§€ ìŠ¤íƒ€ì¼ */\n#choice-container {\n    margin-top: auto;\n    padding-top: 1rem;\n    border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n#choice-container button {\n    text-align: left;\n    padding: 0.75rem 1rem;\n    background: rgba(99, 102, 241, 0.2);\n    border: 1px solid rgba(99, 102, 241, 0.3);\n    border-radius: 8px;\n    color: white;\n    transition: all 0.2s ease;\n    cursor: pointer;\n}\n\n#choice-container button:hover {\n    background: rgba(99, 102, 241, 0.4);\n    border-color: rgba(99, 102, 241, 0.5);\n    transform: translateX(4px);\n}\n\n/* ì…ë ¥ ì˜ì—­ */\n.input-section {\n    background: rgba(31, 41, 55, 0.5);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    border-radius: 12px;\n    padding: 1rem;\n    display: flex;\n    flex-direction: column;\n    gap: 0.75rem;\n}\n\n/* í™•ì¥ ê°€ëŠ¥í•œ í…ìŠ¤íŠ¸ ì…ë ¥ì°½ (ì£¼í™©) */\n.text-input {\n    min-height: 3rem;\n    max-height: 8rem;\n    font-size: 0.95rem;\n    line-height: 1.4;\n    transition: all 0.2s ease;\n}\n\n.text-input:focus {\n    background: rgba(31, 41, 55, 0.8);\n    border-color: rgba(99, 102, 241, 0.5);\n}\n\n/* í•˜ë‹¨ íˆ´ë°” */\n.bottom-toolbar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: 1rem;\n}\n\n/* íˆ´ë°” ì•„ì´ì½˜ë“¤ (ì´ˆë¡) */\n.toolbar-icons {\n    display: flex;\n    gap: 0.5rem;\n}\n\n.toolbar-btn {\n    width: 3rem;\n    height: 3rem;\n    background: rgba(255, 255, 255, 0.1);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    border-radius: 8px;\n    font-size: 1.2rem;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.toolbar-btn:hover {\n    background: rgba(255, 255, 255, 0.2);\n    border-color: rgba(255, 255, 255, 0.3);\n    transform: translateY(-2px);\n}\n\n.toolbar-btn:active {\n    transform: translateY(0);\n}\n\n/* ì „ì†¡ ë²„íŠ¼ (íŒŒë‘) */\n.send-button {\n    min-width: 5rem;\n    white-space: nowrap;\n}\n\n/* ì´ë¯¸ì§€ ì˜ì—­ (íšŒìƒ‰) */\n.image-area {\n    background: rgba(107, 114, 128, 0.2);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    border-radius: 12px;\n    overflow: hidden;\n    position: relative;\n}\n\n.image-area img {\n    transition: opacity 0.3s ease;\n}\n\n/* íˆ´ë°” ì˜¤ë²„ë ˆì´ */\n#toolbar-overlay {\n    animation: slideInRight 0.3s ease;\n}\n\n#toolbar-overlay.hidden {\n    animation: slideOutRight 0.3s ease;\n}\n\n@keyframes slideInRight {\n    from {\n        transform: translateX(100%);\n        opacity: 0;\n    }\n    to {\n        transform: translateX(0);\n        opacity: 1;\n    }\n}\n\n@keyframes slideOutRight {\n    from {\n        transform: translateX(0);\n        opacity: 1;\n    }\n    to {\n        transform: translateX(100%);\n        opacity: 0;\n    }\n}\n\n/* ë°˜ì‘í˜• ë””ìì¸ */\n@media (max-width: 768px) {\n    .grid-new-layout {\n        grid-template-columns: 1fr;\n        grid-template-rows: 1fr auto auto;\n        gap: 0.5rem;\n        padding: 0.5rem;\n    }\n    \n    .main-content-area {\n        grid-row: 1;\n        gap: 0.5rem;\n    }\n    \n    .image-area {\n        grid-row: 2;\n        height: 40vh;\n    }\n    \n    .text-area {\n        padding: 1rem;\n    }\n    \n    .input-section {\n        padding: 0.75rem;\n    }\n    \n    .bottom-toolbar {\n        flex-direction: column;\n        gap: 0.5rem;\n    }\n    \n    .toolbar-icons {\n        order: 2;\n        justify-content: center;\n        width: 100%;\n    }\n    \n    .send-button {\n        order: 1;\n        width: 100%;\n    }\n}\n\n/* í‚¤ë³´ë“œ í™œì„±í™” ìƒíƒœ (ëª¨ë°”ì¼) */\n@media (max-width: 768px) {\n    .keyboard-active .text-area {\n        height: 30vh;\n    }\n    \n    .keyboard-active .image-area {\n        display: none;\n    }\n}"
      },
      "expected_result": "ìƒˆë¡œìš´ ë ˆì´ì•„ì›ƒì— ë§ëŠ” CSS ìŠ¤íƒ€ì¼ ì ìš© ì™„ë£Œ",
      "rollback_possible": true,
      "git_commit": {
        "enabled": true,
        "message": "style: ìƒˆë¡œìš´ 67:33 ë ˆì´ì•„ì›ƒ CSS êµ¬í˜„",
        "description": "- CSS Grid ê¸°ë°˜ 67:33 ë¶„í•  ë ˆì´ì•„ì›ƒ\n- í…ìŠ¤íŠ¸ ì˜ì—­ ìŠ¤íƒ€ì¼ë§ (ë¹¨ê°• ì˜ì—­)\n- í™•ì¥ ê°€ëŠ¥í•œ ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ (ì£¼í™© ì˜ì—­)\n- íˆ´ë°” ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ (ì´ˆë¡ ì˜ì—­)\n- ì „ì†¡ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (íŒŒë‘ ì˜ì—­)\n- ì´ë¯¸ì§€ ì˜ì—­ ë° ì˜¤ë²„ë ˆì´ ì¤€ë¹„\n- ëª¨ë°”ì¼ ë°˜ì‘í˜• ëŒ€ì‘"
      }
    },
    {
      "step": 5,
      "description": "ê¸°ì¡´ JavaScript ì½”ë“œì™€ì˜ í˜¸í™˜ì„± í™•ì¸",
      "command": "filesystem.read",
      "parameters": {
        "path": "src/js/dom.js"
      },
    },
    {
      "step": 7,
      "description": "ui.js íŒŒì¼ì˜ ë Œë”ë§ ë¡œì§ ìˆ˜ì • í•„ìš” ë¶€ë¶„ í™•ì¸",
      "command": "filesystem.read",
      "parameters": {
        "path": "src/js/ui.js"
      },
      "expected_result": "UI ë Œë”ë§ í•¨ìˆ˜ë“¤ì´ ìƒˆë¡œìš´ ë ˆì´ì•„ì›ƒê³¼ í˜¸í™˜ë˜ëŠ”ì§€ í™•ì¸",
      "rollback_possible": true,
      "git_commit": {
        "enabled": false,
        "message": "",
        "description": ""
      }
    },
    {
      "step": 8,
      "description": "ì…ë ¥ì°½ ë™ì  í™•ì¥ ê¸°ëŠ¥ ì¶”ê°€",
      "command": "filesystem.write",
      "parameters": {
        "path": "src/js/input-handler.js",
        "content": "/**\n * íŒŒì¼ëª…: input-handler.js\n * ëª©ì : ìƒˆë¡œìš´ ë ˆì´ì•„ì›ƒì˜ ì…ë ¥ì°½ ë™ì  í™•ì¥ ë° íˆ´ë°” ê¸°ëŠ¥ ì²˜ë¦¬\n * ì‘ì„±ì¼: 2025-09-17\n */\n\nimport * as dom from './dom.js';\nimport * as state from './state.js';\n\n/**\n * ì…ë ¥ì°½ ë™ì  í™•ì¥ ê¸°ëŠ¥ ì´ˆê¸°í™”\n */\nexport function initializeInputHandler() {\n    // ì…ë ¥ì°½ ë™ì  í¬ê¸° ì¡°ì ˆ\n    if (dom.userInput) {\n        dom.userInput.addEventListener('input', handleInputResize);\n        dom.userInput.addEventListener('keydown', handleKeyboardShortcuts);\n        \n        // í¬ì»¤ìŠ¤ ì´ë²¤íŠ¸ ì²˜ë¦¬\n        dom.userInput.addEventListener('focus', () => {\n            dom.inputPanel?.classList.add('focused');\n        });\n        \n        dom.userInput.addEventListener('blur', () => {\n            dom.inputPanel?.classList.remove('focused');\n        });\n    }\n    \n    // íˆ´ë°” ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ\n    dom.toolbarBtns?.forEach(btn => {\n        btn.addEventListener('click', handleToolbarClick);\n    });\n    \n    // ì˜¤ë²„ë ˆì´ ë‹«ê¸° ë²„íŠ¼\n    if (dom.closeOverlay) {\n        dom.closeOverlay.addEventListener('click', hideToolbarOverlay);\n    }\n    \n    // ì˜¤ë²„ë ˆì´ ì™¸ë¶€ í´ë¦­ìœ¼ë¡œ ë‹«ê¸°\n    if (dom.toolbarOverlay) {\n        dom.toolbarOverlay.addEventListener('click', (e) => {\n            if (e.target === dom.toolbarOverlay) {\n                hideToolbarOverlay();\n            }\n        });\n    }\n}\n\n/**\n * ì…ë ¥ì°½ í¬ê¸° ë™ì  ì¡°ì ˆ\n */\nfunction handleInputResize() {\n    if (!dom.userInput) return;\n    \n    // ë†’ì´ ì´ˆê¸°í™”\n    dom.userInput.style.height = 'auto';\n    \n    // ìŠ¤í¬ë¡¤ ë†’ì´ì— ë§ì¶° ì¡°ì ˆ (ìµœëŒ€ ë†’ì´ ì œí•œ)\n    const maxHeight = 200; // 8rem ì •ë„\n    const scrollHeight = dom.userInput.scrollHeight;\n    const newHeight = Math.min(scrollHeight, maxHeight);\n    \n    dom.userInput.style.height = newHeight + 'px';\n    \n    // ìµœëŒ€ ë†’ì´ì— ë„ë‹¬í•˜ë©´ ìŠ¤í¬ë¡¤ í‘œì‹œ\n    if (scrollHeight > maxHeight) {\n        dom.userInput.style.overflowY = 'auto';\n    } else {\n        dom.userInput.style.overflowY = 'hidden';\n    }\n}\n\n/**\n * í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì²˜ë¦¬\n */\nfunction handleKeyboardShortcuts(e) {\n    // Enter: ì „ì†¡ (Shift+Enter: ì¤„ë°”ê¿ˆ)\n    if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        dom.storyForm?.dispatchEvent(new Event('submit'));\n    }\n}\n\n/**\n * íˆ´ë°” ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬\n */\nfunction handleToolbarClick(e) {\n    const action = e.currentTarget.dataset.action;\n    if (!action) return;\n    \n    // ë²„íŠ¼ í™œì„±í™” í‘œì‹œ\n    dom.toolbarBtns?.forEach(btn => {\n        btn.classList.toggle('active', btn === e.currentTarget);\n    });\n    \n    showToolbarOverlay(action);\n}\n\n/**\n * íˆ´ë°” ì˜¤ë²„ë ˆì´ í‘œì‹œ\n */\nfunction showToolbarOverlay(action) {\n    if (!dom.toolbarOverlay || !dom.overlayTitle || !dom.overlayContent) return;\n    \n    // ì œëª© ë° ë‚´ìš© ì„¤ì •\n    const overlayData = getOverlayData(action);\n    dom.overlayTitle.textContent = overlayData.title;\n    dom.overlayContent.innerHTML = overlayData.content;\n    \n    // ì˜¤ë²„ë ˆì´ í‘œì‹œ\n    dom.toolbarOverlay.classList.remove('hidden');\n    \n    // ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ ì‘ì€ ë”œë ˆì´\n    setTimeout(() => {\n        dom.toolbarOverlay.style.opacity = '1';\n        dom.toolbarOverlay.style.transform = 'translateX(0)';\n    }, 10);\n}\n\n/**\n * íˆ´ë°” ì˜¤ë²„ë ˆì´ ìˆ¨ê¸°ê¸°\n */\nfunction hideToolbarOverlay() {\n    if (!dom.toolbarOverlay) return;\n    \n    // ì• ë‹ˆë©”ì´ì…˜\n    dom.toolbarOverlay.style.opacity = '0';\n    dom.toolbarOverlay.style.transform = 'translateX(100%)';\n    \n    // ëª¨ë“  íˆ´ë°” ë²„íŠ¼ ë¹„í™œì„±í™”\n    dom.toolbarBtns?.forEach(btn => {\n        btn.classList.remove('active');\n    });\n    \n    // ì˜¤ë²„ë ˆì´ ìˆ¨ê¸°ê¸°\n    setTimeout(() => {\n        dom.toolbarOverlay.classList.add('hidden');\n    }, 300);\n}\n\n/**\n * ì•¡ì…˜ë³„ ì˜¤ë²„ë ˆì´ ë°ì´í„° ë°˜í™˜\n */\nfunction getOverlayData(action) {\n    const overlayContents = {\n        inventory: {\n            title: 'ğŸ’ ì¸ë²¤í† ë¦¬',\n            content: `\n                <div class=\"space-y-4\">\n                    <div class=\"text-sm text-gray-400 mb-4\">ë³´ìœ  ì•„ì´í…œ</div>\n                    <div class=\"grid grid-cols-2 gap-3\">\n                        <div class=\"bg-gray-800 p-3 rounded-lg border border-gray-700\">\n                            <div class=\"text-lg mb-1\">ğŸ’Š</div>\n                            <div class=\"text-sm font-medium\">ì¹˜ìœ ë¬¼ì•½</div>\n                            <div class=\"text-xs text-gray-400\">x3</div>\n                        </div>\n                        <div class=\"bg-gray-800 p-3 rounded-lg border border-gray-700\">\n                            <div class=\"text-lg mb-1\">ğŸ”®</div>\n                            <div class=\"text-sm font-medium\">ë§ˆë‚˜ë¬¼ì•½</div>\n                            <div class=\"text-xs text-gray-400\">x1</div>\n                        </div>\n                        <div class=\"bg-gray-900 p-3 rounded-lg border border-gray-800 opacity-50\">\n                            <div class=\"text-lg mb-1\">â“</div>\n                            <div class=\"text-sm font-medium text-gray-500\">ë¹ˆ ìŠ¬ë¡¯</div>\n                        </div>\n                        <div class=\"bg-gray-900 p-3 rounded-lg border border-gray-800 opacity-50\">\n                            <div class=\"text-lg mb-1\">â“</div>\n                            <div class=\"text-sm font-medium text-gray-500\">ë¹ˆ ìŠ¬ë¡¯</div>\n                        </div>\n                    </div>\n                    <div class=\"text-xs text-gray-500 mt-4\">\n                        ì•„ì´í…œ ì‹œìŠ¤í…œì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.\n                    </div>\n                </div>\n            `\n        },\n        status: {\n            title: 'ğŸ“Š ìºë¦­í„° ìƒíƒœ',\n            content: `\n                <div class=\"space-y-4\">\n                    <div class=\"text-sm text-gray-400 mb-4\">í˜„ì¬ ìƒíƒœ</div>\n                    \n                    <!-- HP ë°” -->\n                    <div class=\"space-y-2\">\n                        <div class=\"flex justify-between text-sm\">\n                            <span class=\"text-red-400\">â¤ï¸ ìƒëª…ë ¥</span>\n                            <span>85/100</span>\n                        </div>\n                        <div class=\"w-full bg-gray-700 rounded-full h-3\">\n                            <div class=\"bg-red-500 h-3 rounded-full\" style=\"width: 85%\"></div>\n                        </div>\n                    </div>\n                    \n                    <!-- MP ë°” -->\n                    <div class=\"space-y-2\">\n                        <div class=\"flex justify-between text-sm\">\n                            <span class=\"text-blue-400\">ğŸ’™ ë§ˆë‚˜</span>\n                            <span>60/100</span>\n                        </div>\n                        <div class=\"w-full bg-gray-700 rounded-full h-3\">\n                            <div class=\"bg-blue-500 h-3 rounded-full\" style=\"width: 60%\"></div>\n                        </div>\n                    </div>\n                    \n                    <!-- ê¸°íƒ€ ìŠ¤íƒ¯ -->\n                    <div class=\"mt-6 space-y-3\">\n                        <div class=\"flex justify-between text-sm\">\n                            <span class=\"text-gray-300\">ë ˆë²¨</span>\n                            <span class=\"text-yellow-400\">5</span>\n                        </div>\n                        <div class=\"flex justify-between text-sm\">\n                            <span class=\"text-gray-300\">ê²½í—˜ì¹˜</span>\n                            <span class=\"text-green-400\">750/1000</span>\n                        </div>\n                    </div>\n                    \n                    <div class=\"text-xs text-gray-500 mt-6\">\n                        ìƒíƒœ ì‹œìŠ¤í…œì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.\n                    </div>\n                </div>\n            `\n        },\n        skills: {\n            title: 'âš”ï¸ ìŠ¤í‚¬',\n            content: `\n                <div class=\"space-y-4\">\n                    <div class=\"text-sm text-gray-400 mb-4\">ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¤í‚¬</div>\n                    \n                    <div class=\"space-y-3\">\n                        <div class=\"bg-gray-800 p-3 rounded-lg border border-gray-700\">\n                            <div class=\"flex items-center gap-2 mb-2\">\n                                <span class=\"text-lg\">ğŸ”¥</span>\n                                <span class=\"font-medium text-orange-400\">íŒŒì´ì–´ë³¼</span>\n                                <span class=\"text-xs bg-green-600 px-2 py-1 rounded\">ì‚¬ìš©ê°€ëŠ¥</span>\n                            </div>\n                            <div class=\"text-xs text-gray-400\">ê¸°ë³¸ í™”ì—¼ ë§ˆë²•. ë§ˆë‚˜ 15 ì†Œëª¨.</div>\n                        </div>\n                        \n                        <div class=\"bg-gray-800 p-3 rounded-lg border border-gray-700 opacity-60\">\n                            <div class=\"flex items-center gap-2 mb-2\">\n                                <span class=\"text-lg\">ğŸ’š</span>\n                                <span class=\"font-medium text-green-400\">í</span>\n                                <span class=\"text-xs bg-red-600 px-2 py-1 rounded\">ë§ˆë‚˜ë¶€ì¡±</span>\n                            </div>\n                            <div class=\"text-xs text-gray-400\">ì²´ë ¥ì„ íšŒë³µí•©ë‹ˆë‹¤. ë§ˆë‚˜ 25 ì†Œëª¨.</div>\n                        </div>\n                        \n                        <div class=\"bg-gray-900 p-3 rounded-lg border border-gray-800 opacity-40\">\n                            <div class=\"flex items-center gap-2 mb-2\">\n                                <span class=\"text-lg\">â“</span>\n                                <span class=\"font-medium text-gray-500\">ì ê¸ˆë¨</span>\n                            </div>\n                            <div class=\"text-xs text-gray-500\">ë ˆë²¨ 10ì— í•´ì œë©ë‹ˆë‹¤.</div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"text-xs text-gray-500 mt-6\">\n                        ìŠ¤í‚¬ ì‹œìŠ¤í…œì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.\n                    </div>\n                </div>\n            `\n        },\n        settings: {\n            title: 'âš™ï¸ ì„¤ì •',\n            content: `\n                <div class=\"space-y-4\">\n                    <div class=\"text-sm text-gray-400 mb-4\">ê²Œì„ ì„¤ì •</div>\n                    \n                    <div class=\"space-y-4\">\n                        <div class=\"flex items-center justify-between\">\n                            <span class=\"text-sm\">ë””ë²„ê·¸ ëª¨ë“œ</span>\n                            <button class=\"bg-gray-600 hover:bg-gray-500 px-3 py-1 rounded text-xs\">\n                                ${state.isDebugMode ? 'ON' : 'OFF'}\n                            </button>\n                        </div>\n                        \n                        <div class=\"flex items-center justify-between\">\n                            <span class=\"text-sm\">ìë™ ì €ì¥</span>\n                            <button class=\"bg-green-600 hover:bg-green-500 px-3 py-1 rounded text-xs\">\n                                ON\n                            </button>\n                        </div>\n                        \n                        <hr class=\"border-gray-700\">\n                        \n                        <div class=\"space-y-2\">\n                            <button class=\"w-full bg-blue-600 hover:bg-blue-700 py-2 px-4 rounded text-sm\">\n                                ê²Œì„ ì €ì¥í•˜ê¸°\n                            </button>\n                            <button class=\"w-full bg-green-600 hover:bg-green-700 py-2 px-4 rounded text-sm\">\n                                ê²Œì„ ë¶ˆëŸ¬ì˜¤ê¸°\n                            </button>\n                        </div>\n                    </div>\n                    \n                    <div class=\"text-xs text-gray-500 mt-6\">\n                        ìƒì„¸ ì„¤ì •ì€ ìš°ìƒë‹¨ âš™ï¸ ë²„íŠ¼ì„ ì´ìš©í•˜ì„¸ìš”.\n                    </div>\n                </div>\n            `\n        }\n    };\n    \n    return overlayContents[action] || {\n        title: 'ì•Œ ìˆ˜ ì—†ëŠ” ê¸°ëŠ¥',\n        content: '<div class=\"text-center text-gray-500\">ì¤€ë¹„ ì¤‘ì¸ ê¸°ëŠ¥ì…ë‹ˆë‹¤.</div>'\n    };\n}\n\n// ESC í‚¤ë¡œ ì˜¤ë²„ë ˆì´ ë‹«ê¸°\ndocument.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape' && dom.toolbarOverlay && !dom.toolbarOverlay.classList.contains('hidden')) {\n        hideToolbarOverlay();\n    }\n});"
      },
      "expected_result": "ì…ë ¥ì°½ í™•ì¥ ë° íˆ´ë°” ê¸°ëŠ¥ì´ êµ¬í˜„ë¨",
      "rollback_possible": true,
      "git_commit": {
        "enabled": true,
        "message": "feat: ì…ë ¥ì°½ ë™ì  í™•ì¥ ë° íˆ´ë°” ì˜¤ë²„ë ˆì´ ê¸°ëŠ¥ êµ¬í˜„",
        "description": "- ì…ë ¥ì°½ ìë™ í¬ê¸° ì¡°ì ˆ ê¸°ëŠ¥\n- íˆ´ë°” ë²„íŠ¼ í´ë¦­ ì‹œ ì´ë¯¸ì§€ ìœ„ ì˜¤ë²„ë ˆì´ í‘œì‹œ\n- ì¸ë²¤í† ë¦¬, ìƒíƒœ, ìŠ¤í‚¬, ì„¤ì • í”Œë ˆì´ìŠ¤í™€ë” êµ¬í˜„\n- ESC í‚¤ ë° ì™¸ë¶€ í´ë¦­ìœ¼ë¡œ ì˜¤ë²„ë ˆì´ ë‹«ê¸°\n- í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì›"
      }
    },
    {
      "step": 9,
      "description": "main.jsì— ìƒˆë¡œìš´ ì…ë ¥ í•¸ë“¤ëŸ¬ ì´ˆê¸°í™” ì½”ë“œ ì¶”ê°€",
      "command": "filesystem.write",
      "parameters": {
        "path": "src/js/main.js",
        "content": "/**\n * íŒŒì¼ëª…: main.js\n * ëª©ì : ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ë¡œì§, ê²Œì„ íë¦„ ì œì–´, ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. (v4 ì•„í‚¤í…ì²˜)\n * ì‘ì„±ì¼: 2025-09-14\n * \n * === ë³€ê²½ íˆìŠ¤í† ë¦¬ ===\n * 2025-09-14 14:11 - ì´ˆê¸° ìƒì„±: VV3.mdì˜ í•µì‹¬ ë¡œì§ê³¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ í†µí•©\n * 2025-09-14 14:40 - v4 ì•„í‚¤í…ì²˜ ë¦¬íŒ©í† ë§: 2-API í˜¸ì¶œ, DAD ìŠ¤ëƒ…ìƒ·, ì‘ì—… í ë¡œì§ ì ìš©\n * 2025-09-16 13:50 - ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ì— ë§ì¶° API ì¬ì‹œë„ ë° ì˜¤ë¥˜ ì²˜ë¦¬ ë¡œì§ ì „ë©´ ê°œí¸\n * 2025-09-16 14:00 - ì‚¬ìš©ì ì„¤ê³„ì•ˆì— ë§ì¶° ì´ë¯¸ì§€ ìƒì„±(processTask) ë¡œì§ ì „ë©´ ì¬ì„¤ê³„\n * 2025-09-16 14:20 - UX ê°œì„ : 1ì°¨ API ì™„ë£Œ í›„ ì¦‰ì‹œ ë Œë”ë§ ë° ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬ ë¡œì§ ë„ì…\n * 2025-09-17 - ìƒˆë¡œìš´ ë ˆì´ì•„ì›ƒì— ë§ê²Œ ì…ë ¥ í•¸ë“¤ëŸ¬ ì´ˆê¸°í™” ì¶”ê°€\n * =====================\n */\n\nimport * as dom from './dom.js';\nimport * as state from './state.js';\nimport * as cfg from './config.js';\nimport * as ui from './ui.js';\nimport * as api from './api.js';\nimport * as utils from './utils.js';\nimport { initializeInputHandler } from './input-handler.js';\n\n// --- SECTION: í•µì‹¬ ê²Œì„ íë¦„ (Orchestrator) (v4) ---\n\nasync function startGame() {\n    try {\n        const genre = dom.genreInput.value;\n        const adventure = dom.adventureInput.value;\n        if (!genre || !adventure) {\n            alert('ì¥ë¥´ì™€ ëª¨í—˜ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n            return;\n        }\n\n        ui.showPageLoader(\"ì„¸ê³„ê´€ êµ¬ì„± ì¤‘...\");\n        const worldBuildContext = [{ role: \"user\", parts: [{ text: `ì¥ë¥´: ${genre}\\nëª¨í—˜: ${adventure}` }] }];\n        \n        const briefJsonResponse = await api.callGenerativeAPI(worldBuildContext, cfg.worldBuilderSystemPrompt, !!state.userApiKey);\n        \n        if (!briefJsonResponse) throw new Error(\"ìº í˜ì¸ ìƒì„± AIë¡œë¶€í„° ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\");\n\n        const initialDadSnapshot = utils.parseCampaignBrief(briefJsonResponse);\n        initialDadSnapshot.genre = genre;\n        initialDadSnapshot.adventure = adventure;\n        state.setInitialDadSnapshot(initialDadSnapshot);\n\n        dom.setupScreen.classList.add('hidden');\n        dom.storyScreen.classList.remove('hidden');\n        dom.storyScreen.classList.add('grid-new-layout');\n\n        await processTurn(`ëª¨í—˜ì´ ì‹œì‘ë©ë‹ˆë‹¤. ë‹¹ì‹ ì€ ë°©ê¸ˆ ìƒì„±ëœ ì„¸ê³„ê´€ì— ë”°ë¼ ì´ì•¼ê¸°ë¥¼ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì£¼ì¸ê³µì„ 'ìƒˆë¡œìš´ í•µì‹¬ ì¸ë¬¼'ë¡œì„œ ìƒì„±í•˜ê³ , ëª¨í—˜ì„ ì‹œì‘í•˜ëŠ” ì²« ë²ˆì§¸ ì¥ë©´ì„ ì™„ì„±í•´ì£¼ì„¸ìš”.`, true);\n\n    } catch (error) {\n        console.error(\"Game start error:\", error);\n        \n        if (error instanceof api.ApiError && !state.userApiKey) {\n            alert(\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‚´ë¶€ API ì‚¬ìš©ëŸ‰ì´ ì†Œì§„ë˜ì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„¤ì • ë©”ë‰´ë¥¼ ì—´ì–´ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n            dom.settingsModal.classList.remove('hidden');\n        } else {\n            alert(error.message || \"ê²Œì„ ì‹œì‘ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\n        }\n\n        dom.setupScreen.classList.remove('hidden');\n        dom.storyScreen.classList.add('hidden');\n    } finally {\n        ui.hidePageLoader();\n    }\n}\n\nasync function handleUserInput(e) {\n    if (e) e.preventDefault();\n    const text = dom.userInput.value.trim();\n    if (!text || state.isGenerating) return;\n\n    if (state.isBranchingActive) {\n        await handleBranching(state.currentSceneIndex, text);\n        return;\n    }\n\n    dom.userInput.value = '';\n    dom.userInput.style.height = 'auto';\n    ui.clearChoices();\n    await processTurn(text);\n}\n\nasync function handleBranching(branchIndex, userChoice) {\n    state.setSceneArchive(state.sceneArchive.slice(0, branchIndex + 1));\n    state.setCurrentSceneIndex(branchIndex);\n    state.setIsBranchingActive(false);\n    dom.userInput.placeholder = \"ë‹¤ìŒ í–‰ë™ì„ ì…ë ¥í•˜ì„¸ìš”... (Enter: ì „ì†¡, Shift+Enter: ì¤„ë°”ê¿ˆ)\";\n\n    dom.userInput.value = '';\n    dom.userInput.style.height = 'auto';\n    ui.clearChoices();\n    await processTurn(userChoice);\n}\n\nexport async function processTurn(userText, isFirstScene = false) {\n    state.setIsGenerating(true);\n    ui.updateGlobalLoadingState();\n\n    try {\n        const previousDadSnapshot = isFirstScene ? state.initialDadSnapshot : state.sceneArchive[state.currentSceneIndex].dadSnapshot;\n\n        const storyContext = buildStoryContext(userText, previousDadSnapshot);\n        const storyResponse = await api.callGenerativeAPI(storyContext, cfg.storyGeneratorSystemPrompt, !!state.userApiKey);\n        if (!storyResponse) throw new Error(\"1ì°¨ API(ì„œì‚¬ ìƒì„±)ë¡œë¶€í„° ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\");\n        const { title, story } = utils.parseModelResponse(storyResponse);\n        \n        if (isFirstScene) ui.hidePageLoader();\n\n        const tempSceneData = {\n            user_input: userText,\n            title,\n            story,\n            isComplete: false,\n            dadSnapshot: previousDadSnapshot,\n        };\n\n        if (state.currentSceneIndex < state.sceneArchive.length - 1) {\n            state.setSceneArchive(state.sceneArchive.slice(0, state.currentSceneIndex + 1));\n        }\n        state.sceneArchive.push(tempSceneData);\n        state.setCurrentSceneIndex(state.sceneArchive.length - 1);\n        \n        ui.renderScene(state.currentSceneIndex);\n\n        finishSceneGeneration(state.currentSceneIndex, previousDadSnapshot, story, storyResponse);\n\n    } catch (error) {\n        console.error(\"Turn processing error:\", error);\n        state.setIsGenerating(false);\n        ui.updateGlobalLoadingState();\n        \n        if (error instanceof api.ApiError && !state.userApiKey) {\n            alert(\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‚´ë¶€ API ì‚¬ìš©ëŸ‰ì´ ì†Œì§„ë˜ì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„¤ì • ë©”ë‰´ë¥¼ ì—´ì–´ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n            dom.settingsModal.classList.remove('hidden');\n        } else {\n            alert(error.message || \"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\n        }\n\n        if (isFirstScene) {\n            dom.setupScreen.classList.remove('hidden');\n            dom.storyScreen.classList.add('hidden');\n        }\n    }\n}\n\nasync function finishSceneGeneration(sceneIndex, previousDadSnapshot, story, storyResponse) {\n    try {\n        const analysisContext = buildAnalysisContext(story, previousDadSnapshot);\n        let analysisResponse;\n        try {\n            analysisResponse = await api.callGenerativeAPI(analysisContext, cfg.analysisSystemPrompt, false);\n        } catch (error) {\n            if (error instanceof api.ApiError && error.status === 429 && state.userApiKey) {\n                console.warn(\"ë‚´ë¶€ API(ë¶„ì„) í• ë‹¹ëŸ‰ ì´ˆê³¼. API í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¬ì‹œë„í•©ë‹ˆë‹¤.\");\n                analysisResponse = await api.callGenerativeAPI(analysisContext, cfg.analysisSystemPrompt, true);\n            } else {\n                throw error;\n            }\n        }\n        if (!analysisResponse) throw new Error(\"2ì°¨ API(ë¶„ì„)ë¡œë¶€í„° ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\");\n        const analysisResult = utils.parseModelResponse(analysisResponse);\n\n        const newDadSnapshot = mergeDadSnapshot(previousDadSnapshot, analysisResult.newAssets);\n\n        await executeTaskQueue(analysisResult.taskQueue, newDadSnapshot);\n\n        const finalSceneData = {\n            ...state.sceneArchive[sceneIndex],\n            hints: analysisResult.hints,\n            choices: analysisResult.choices,\n            displayImageId: analysisResult.displayImageId,\n            dadSnapshot: newDadSnapshot,\n            raw_story_response: storyResponse,\n            raw_analysis_response: analysisResponse,\n            taskQueue: analysisResult.taskQueue,\n            isComplete: true,\n        };\n        state.sceneArchive[sceneIndex] = finalSceneData;\n\n    } catch (error) {\n        console.error(\"Background scene generation error:\", error);\n        state.sceneArchive[sceneIndex].error = true;\n    } finally {\n        state.setIsGenerating(false);\n        if (state.currentSceneIndex === sceneIndex) {\n            ui.renderScene(sceneIndex);\n        }\n        ui.updateGlobalLoadingState();\n    }\n}\n\nfunction buildStoryContext(currentUserAction, dadSnapshot) {\n    const narrativeContext = buildNarrativeContext();\n    return [\n        { role: \"user\", parts: [{ text: JSON.stringify({ dynamicAssetDatabase: dadSnapshot, narrativeContext, currentUserAction }) }] }\n    ];\n}\n\nfunction buildAnalysisContext(storyForAnalysis, dadSnapshot) {\n    const recentStoryContext = state.sceneArchive.slice(-2).map(scene => scene.story);\n    return [\n        { role: \"user\", parts: [{ text: JSON.stringify({ dynamicAssetDatabase: dadSnapshot, storyForAnalysis, recentStoryContext }) }] }\n    ];\n}\n\nfunction buildNarrativeContext() {\n    const shortTermMemoryCount = 4;\n    let history = [];\n\n    if (state.sceneArchive.length > 0) {\n        const longTermScenes = state.sceneArchive.slice(0, -shortTermMemoryCount);\n        const shortTermScenes = state.sceneArchive.slice(-shortTermMemoryCount);\n\n        if (longTermScenes.length > 0) {\n            const longTermStorySummary = longTermScenes.map((scene, i) => `[SCENE ${i + 1} STORY]:\\n${scene.story}`).join('\\n\\n');\n            history.push({ role: \"user\", parts: [{ text: `[LONG_TERM_MEMORY_SUMMARY]\\n${longTermStorySummary}` }] });\n            history.push({ role: \"model\", parts: [{ text: \"ì•Œê² ìŠµë‹ˆë‹¤. ì¥ê¸° ê¸°ì–µ(ì´ì „ ì´ì•¼ê¸°ë“¤)ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.\" }] });\n        }\n\n        shortTermScenes.forEach(scene => {\n            history.push({ role: \"user\", parts: [{ text: scene.user_input }] });\n            if(scene.raw_analysis_response) history.push({ role: \"model\", parts: [{ text: scene.raw_analysis_response }] });\n        });\n    }\n    return history;\n}\n\nfunction mergeDadSnapshot(previousSnapshot, newAssets) {\n    const newSnapshot = JSON.parse(JSON.stringify(previousSnapshot));\n    if (!newAssets) return newSnapshot;\n\n    const merge = (targetArray, sourceArray) => {\n        if (!sourceArray || !Array.isArray(sourceArray)) return;\n        sourceArray.forEach(newItem => {\n            const existingIndex = targetArray.findIndex(item => item.id === newItem.id);\n            if (existingIndex > -1) {\n                targetArray[existingIndex] = { ...targetArray[existingIndex], ...newItem };\n            } else {\n                targetArray.push(newItem);\n            }\n        });\n    };\n\n    merge(newSnapshot.keyCharacters, newAssets.keyCharacters);\n    merge(newSnapshot.keyItems, newAssets.keyItems);\n    merge(newSnapshot.keyLocations, newAssets.keyLocations);\n    merge(newSnapshot.keySkills, newAssets.keySkills);\n\n    return newSnapshot;\n}\n\nasync function executeTaskQueue(taskQueue, dadSnapshot) {\n    if (!taskQueue || taskQueue.length === 0) return;\n\n    const keyVisualTask = taskQueue.find(t => t.type === 'key_visual');\n    if (keyVisualTask && !state.imageCache.has(keyVisualTask.assetId)) {\n        await processTask(keyVisualTask, dadSnapshot);\n    }\n\n    for (const task of taskQueue) {\n        if (task.type !== 'key_visual') {\n            const imageCacheKey = `${task.assetId}_${task.type}`;\n            if (!state.imageCache.has(imageCacheKey)) {\n                await processTask(task, dadSnapshot);\n            }\n        }\n    }\n}\n\nasync function processTask(task, dadSnapshot) {\n    const imageCacheKey = task.type === 'key_visual' ? task.assetId : `${task.assetId}_${task.type}`;\n    \n    const promptTemplate = cfg.promptTemplates[task.type];\n    if (!promptTemplate) {\n        console.warn(`ì•Œ ìˆ˜ ì—†ëŠ” ì‘ì—… ìœ í˜•: ${task.type}`);\n        return;\n    }\n\n    let promptData = { ...promptTemplate };\n    const referenceImages = [];\n    \n    switch (task.type) {\n        case 'key_visual':\n            promptData.data_payload = dadSnapshot;\n            break;\n\n        case '3_view_reference':\n            promptData.data_payload = dadSnapshot.keyCharacters.find(c => c.id === task.assetId) || dadSnapshot.keyItems.find(i => i.id === task.assetId) || {};\n            if (state.imageCache.has('campaign_key_visual')) {\n                referenceImages.push({ id: 'campaign_key_visual', base64Data: state.imageCache.get('campaign_key_visual').split(',')[1] });\n            }\n            break;\n\n        case 'head_portrait':\n            promptData.data_payload = dadSnapshot.keyCharacters.find(c => c.id === task.assetId) || {};\n            if (state.imageCache.has('campaign_key_visual')) {\n                referenceImages.push({ id: 'campaign_key_visual', base64Data: state.imageCache.get('campaign_key_visual').split(',')[1] });\n            }\n            const threeViewCacheKey = `${task.assetId}_3_view_reference`;\n            if (state.imageCache.has(threeViewCacheKey)) {\n                 referenceImages.push({ id: threeViewCacheKey, base64Data: state.imageCache.get(threeViewCacheKey).split(',')[1] });\n            }\n            break;\n\n        case 'illustration':\n            promptData.scene_text_payload = state.sceneArchive[state.currentSceneIndex].story;\n            promptData.data_payload = { dadSnapshot };\n            \n            if (state.imageCache.has('campaign_key_visual')) {\n                 referenceImages.push({ id: 'campaign_key_visual', base64Data: state.imageCache.get('campaign_key_visual').split(',')[1] });\n            }\n\n            const currentTaskQueue = state.sceneArchive[state.currentSceneIndex].taskQueue || [];\n            currentTaskQueue.forEach(t => {\n                const assetCacheKey = `${t.assetId}_${t.type}`;\n                if (t.type === '3_view_reference' && state.imageCache.has(assetCacheKey)) {\n                    referenceImages.push({ id: assetCacheKey, base64Data: state.imageCache.get(assetCacheKey).split(',')[1] });\n                }\n            });\n            break;\n    }\n\n    try {\n        let imageUrl = await api.callImageAPI(promptData, referenceImages, false);\n        state.imageCache.set(imageCacheKey, imageUrl);\n    } catch (error) {\n        if (error instanceof api.ApiError && error.status === 429 && state.userApiKey) {\n            console.warn(`ë‚´ë¶€ ì´ë¯¸ì§€ API í• ë‹¹ëŸ‰ ì´ˆê³¼ (${task.assetId}). API í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¬ì‹œë„í•©ë‹ˆë‹¤.`);\n            try {\n                const imageUrl = await api.callImageAPI(promptData, referenceImages, true);\n                state.imageCache.set(imageCacheKey, imageUrl);\n            } catch (retryError) {\n                 console.error(`Image API retry failed for task: ${task.assetId}`, retryError);\n                 state.imageCache.set(imageCacheKey, \"https://placehold.co/1200x1800/ff0000/FFF?text=Gen+Failed\");\n            }\n        } else {\n            console.error(`Failed to generate image for task: ${task.assetId}`, error);\n            state.imageCache.set(imageCacheKey, \"https://placehold.co/1200x1800/ff0000/FFF?text=Gen+Failed\");\n            if (error instanceof api.ApiError && !state.userApiKey) {\n                 alert(\"ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‚´ë¶€ API ì‚¬ìš©ëŸ‰ì´ ì†Œì§„ë˜ì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„¤ì •ì—ì„œ API í‚¤ë¥¼ ì…ë ¥í•˜ì‹œë©´ ê³„ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\");\n                 dom.settingsModal.classList.remove('hidden');\n            }\n        }\n    }\n}\n\n// --- SECTION: ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ (v4) ---\n\nfunction initializeEventListeners() {\n    dom.startBtn.addEventListener('click', startGame);\n    dom.loadBtn.addEventListener('click', () => dom.loadInput.click());\n    dom.loadInput.addEventListener('change', utils.handleFileLoad);\n\n    dom.prevBtn.addEventListener('click', () => { if (state.currentSceneIndex > 0) ui.renderScene(state.currentSceneIndex - 1); });\n    dom.nextBtn.addEventListener('click', () => { if (state.currentSceneIndex < state.sceneArchive.length - 1) ui.renderScene(state.currentSceneIndex + 1); });\n\n    dom.storyForm.addEventListener('submit', handleUserInput);\n    \n    dom.settingsBtnFloating.addEventListener('click', () => dom.settingsModal.classList.remove('hidden'));\n    dom.closeSettingsBtn.addEventListener('click', () => dom.settingsModal.classList.add('hidden'));\n    dom.debugCheckbox.addEventListener('change', () => {\n        state.setIsDebugMode(dom.debugCheckbox.checked);\n        if (state.currentSceneIndex >= 0) ui.toggleDebugView(state.isDebugMode);\n    });\n    dom.saveBtn.addEventListener('click', utils.saveStory);\n    dom.loadModalBtn.addEventListener('click', () => { dom.loadInput.click(); dom.settingsModal.classList.add('hidden'); });\n\n    const syncApiKeys = (e) => {\n        state.setUserApiKey(e.target.value);\n        dom.apiKeyModalInput.value = state.userApiKey;\n        dom.apiKeySetupInput.value = state.userApiKey;\n    };\n    dom.apiKeySetupInput.addEventListener('input', syncApiKeys);\n    dom.apiKeyModalInput.addEventListener('input', syncApiKeys);\n\n    dom.branchBtn.addEventListener('click', () => {\n        state.setIsBranchingActive(true);\n        ui.renderScene(state.currentSceneIndex);\n        dom.userInput.placeholder = \"ë‹¤ë¥¸ ì„ íƒì§€ë¥¼ ê³ ë¥´ê±°ë‚˜, ìƒˆë¡œìš´ í–‰ë™ì„ ì…ë ¥í•˜ì„¸ìš”.\";\n    });\n\n    const closeImageViewer = () => dom.imageViewerModal.classList.add('hidden');\n    dom.closeImageViewerBtn.addEventListener('click', closeImageViewer);\n    dom.imageViewerModal.addEventListener('click', (e) => {\n        if (e.target.id === 'image-viewer-modal') closeImageViewer();\n    });\n\n    window.addEventListener('keydown', (e) => {\n        const isModalOpen = !dom.settingsModal.classList.contains('hidden');\n        const isInputFocused = document.activeElement === dom.userInput;\n\n        if (e.key === 'Escape') {\n            e.preventDefault();\n            if (!dom.imageViewerModal.classList.contains('hidden')) {\n                closeImageViewer();\n            } else if (state.isBranchingActive) {\n                state.setIsBranchingActive(false);\n                ui.renderScene(state.currentSceneIndex);\n            } else {\n                dom.settingsModal.classList.toggle('hidden');\n            }\n        }\n\n        if (isInputFocused || isModalOpen) return;\n\n        if (e.key === 'ArrowLeft') { dom.prevBtn.click(); }\n        if (e.key === 'ArrowRight') { dom.nextBtn.click(); }\n\n        if (e.key === 'ArrowUp') { document.querySelector('#story-panel .flex-grow')?.scrollBy(0, -50); }\n        if (e.key === 'ArrowDown') { document.querySelector('#story-panel .flex-grow')?.scrollBy(0, 50); }\n\n        if (e.ctrlKey && e.key === 'ArrowDown') { e.preventDefault(); dom.userInput.focus(); }\n        if (e.ctrlKey && e.key === 'ArrowUp') { e.preventDefault(); dom.prevBtn.focus(); }\n    });\n}\n\n// --- SECTION: ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ---\n\nwindow.addEventListener('DOMContentLoaded', () => {\n    initializeEventListeners();\n    initializeInputHandler(); // ìƒˆë¡œìš´ ì…ë ¥ í•¸ë“¤ëŸ¬ ì´ˆê¸°í™”\n});"
      },
      "expected_result": "main.jsì— ìƒˆë¡œìš´ ì…ë ¥ í•¸ë“¤ëŸ¬ ì´ˆê¸°í™” ì™„ë£Œ",
      "rollback_possible": true,
      "git_commit": {
        "enabled": true,
        "message": "feat: main.jsì— ìƒˆë¡œìš´ ì…ë ¥ í•¸ë“¤ëŸ¬ í†µí•©",
        "description": "- input-handler.js ëª¨ë“ˆ ì„í¬íŠ¸ ë° ì´ˆê¸°í™”\n- ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì™€ í˜¸í™˜ì„± ìœ ì§€\n- DOMContentLoaded ì‹œ ì…ë ¥ í•¸ë“¤ëŸ¬ ìë™ ì´ˆê¸°í™”"
      }
    },
    {
      "step": 10,
      "description": "ë ˆì´ì•„ì›ƒ ë³€ê²½ ì™„ë£Œ í™•ì¸",
      "command": "shell.run",
      "parameters": {
        "command": "echo 'Phase 1: UI ë ˆì´ì•„ì›ƒ êµ¬ì¡° ë³€ê²½ ì™„ë£Œ!\n\nâœ… êµ¬í˜„ëœ ê¸°ëŠ¥:\n1. 67:33 ë¶„í•  ë ˆì´ì•„ì›ƒ (í…ìŠ¤íŠ¸ ì˜ì—­ 2ë°° í™•ì¥)\n2. í•˜ë‹¨ ì…ë ¥ ì˜ì—­ (í™•ì¥í˜• ì…ë ¥ì°½ + íˆ´ë°” + ì „ì†¡ë²„íŠ¼)\n3. ë™ì  ì…ë ¥ì°½ í¬ê¸° ì¡°ì ˆ\n4. íˆ´ë°” ë²„íŠ¼ í´ë¦­ì‹œ ì´ë¯¸ì§€ ìœ„ ì˜¤ë²„ë ˆì´\n5. ë°˜ì‘í˜• ëª¨ë°”ì¼ ë ˆì´ì•„ì›ƒ\n6. ESCí‚¤ ë° í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì›\n\nğŸš€ í…ŒìŠ¤íŠ¸ ë°©ë²•:\n- ë¸Œë¼ìš°ì €ì—ì„œ index.html ì—´ê¸°\n- í…ìŠ¤íŠ¸ ì˜ì—­ì´ í™”ë©´ì˜ 67% ì°¨ì§€ í™•ì¸\n- ì…ë ¥ì°½ì— ê¸´ í…ìŠ¤íŠ¸ ì…ë ¥ì‹œ ìë™ í™•ì¥ í™•ì¸\n- ğŸ’ğŸ“Šâš”ï¸âš™ï¸ íˆ´ë°” ë²„íŠ¼ í´ë¦­ì‹œ ì˜¤ë²„ë ˆì´ í‘œì‹œ í™•ì¸\n- ëª¨ë°”ì¼ í™”ë©´ì—ì„œ ì„¸ë¡œ ìŠ¤íƒ ë ˆì´ì•„ì›ƒ í™•ì¸\n\nğŸ“‹ ë‹¤ìŒ ë‹¨ê³„ (Phase 2):\n- ì„ íƒì§€ë¥¼ í…ìŠ¤íŠ¸ ì˜ì—­ í•˜ë‹¨ì— í‘œì‹œí•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„\n- ê¸°ì¡´ JavaScript ë¡œì§ê³¼ì˜ ì™„ì „í•œ í˜¸í™˜ì„± í™•ë³´'"
      },
      "expected_result": "ë ˆì´ì•„ì›ƒ ë³€ê²½ ì‘ì—… ì™„ë£Œ í™•ì¸ ë° ë‹¤ìŒ ë‹¨ê³„ ì•ˆë‚´",
      "rollback_possible": false,
      "git_commit": {
        "enabled": true,
        "message": "feat: Phase 1 - UI ë ˆì´ì•„ì›ƒ êµ¬ì¡° ë³€ê²½ ì™„ë£Œ",
        "description": "- 67:33 ë¶„í•  ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ êµ¬í˜„\n- í…ìŠ¤íŠ¸ ì˜ì—­ 2ë°° í™•ì¥ (33% â†’ 67%)\n- ë™ì  ì…ë ¥ì°½ ë° íˆ´ë°” ì˜¤ë²„ë ˆì´ ì‹œìŠ¤í…œ\n- ë°˜ì‘í˜• ë””ìì¸ ì ìš©\n- ê¸°ì¡´ ì½”ë“œì™€ì˜ í˜¸í™˜ì„± ìœ ì§€\n- Phase 2 ì¤€ë¹„ ì™„ë£Œ"
      }
    }
  ]
}